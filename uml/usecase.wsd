@startuml 乒乓球培训管理系统用例图
' 定义系统参与者（用户角色）
actor 超级管理员 as SuperAdmin
actor 校区管理员 as CampusAdmin
actor 学员 as Student
actor 教练员 as Coach

' ======================================
' 超级管理员用例（覆盖校区管理、系统付费核心能力）
' ======================================
SuperAdmin -- (管理校区基础信息：录入名称/地址/联系方式)
SuperAdmin -- (指定分校区负责人：分配校区管理员权限)
SuperAdmin -- (操作全校区数据：覆盖校区管理员所有管理功能)
SuperAdmin -- (支付系统服务费：按年支付500元，使用前支付)
SuperAdmin -- (获取唯一设备秘钥：支付后绑定单台设备)

' ======================================
' 校区管理员用例（聚焦本校区日常运营管理）
' ======================================
CampusAdmin -- (审核教练员入职：含指定教练级别（初/中/高）)
CampusAdmin -- (管理学员信息：添加/修改/删除/查询本校区学员)
CampusAdmin -- (管理教练员信息：添加/修改/删除/查询本校区教练)
CampusAdmin -- (管理课程预约：查看/调整本校区课程预约数据)
CampusAdmin -- (录入线下缴费：手工记录学员线下预存的训练费)
CampusAdmin -- (审核换教练申请：确认学员更换教练的三方同意)
CampusAdmin -- (查询系统日志：查看用户重要操作记录（如报名/预约/缴费）)

' ======================================
' 学员用例（覆盖注册、学习、评价全流程）
' ======================================
Student -- (注册入学：填写必填信息（用户名/密码/校区/姓名/电话）)
Student -- (维护个人信息：更换照片/修改8-16位复杂密码)
Student -- (查询教练员：①按姓名/性别/年龄检索 ②浏览校区全部教练)
Student -- (申请选主管教练：提交申请后等待教练审核)
Student -- (预约课程：基于双选关系，选择教练空白时段+球台)
Student -- (申请取消预约：24小时前发起，需对方确认，每月≤3次)
Student -- (查询个人课表：查看已预约课程的时间/球台/教练信息)
Student -- (发起换教练：需当前教练/新教练/校区管理员三方同意)
Student -- (填写课后评价：记录训练收获与教训)
Student -- (报名月赛：选择甲乙丙组别，账户扣除30元报名费)
Student -- (接收上课提醒：上课前1小时系统消息通知)

' 学员用例包含关系（拆分支付子场景）
(预存训练费) --|> (线上支付：微信/支付宝扫二维码)
(预存训练费) --|> (线下支付：等待管理员手工录入)
Student -- (预存训练费)
(报名月赛) --|> (支付月赛报名费：系统自动扣账户余额)

' ======================================
' 教练员用例（覆盖入职、教学、审核核心动作）
' ======================================
Coach -- (入职申请：提交照片/比赛成绩，等待校区管理员审核)
Coach -- (维护个人信息：更换照片/修改8-16位复杂密码)
Coach -- (审核选教练申请：通过则建立双选关系，不通过记录日志)
Coach -- (查看预约消息：接收学员课程预约通知)
Coach -- (审核课程预约：确认/拒绝学员的课程预约请求)
Coach -- (审核取消预约：确认学员发起的取消申请，触发退费)
Coach -- (申请取消预约：24小时前发起，需学员确认，每月≤3次)
Coach -- (查询个人课表：查看未来一周已预约/空白时段)
Coach -- (填写课后评价：记录学员表现与提升建议)
Coach -- (接收上课提醒：上课前1小时系统消息通知)

' ======================================
' 角色约束说明（补充用例规则）
' ======================================
note right of SuperAdmin: 1. 缺省为中心校区管理员\n2. 可操作所有校区管理员的数据\n3. 秘钥仅绑定1台设备（PC/笔记本）
note right of CampusAdmin: 所有信息修改后，需以系统消息提醒相关用户（如改教练信息提醒教练）
note right of Student: 1. 最多绑定2名主管教练\n2. 取消预约时系统提示本月剩余次数\n3. 账户余额不足则无法预约课程
note right of Coach: 1. 最多指导20名学员\n2. 不同级别收费：高级200元/时，中级150元/时，初级80元/时\n3. 双选/预约/取消均需记录操作日志

@enduml